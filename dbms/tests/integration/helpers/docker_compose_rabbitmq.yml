version: '2.2'

services:
    rabbitmq1:
        image: rabbitmq:3-management
        hostname: rabbitmq1
        ports:
            - "5672:5672"
            - "15672:15672"
        environment:
            RABBITMQ_DEFAULT_USER: "guest"
            RABBITMQ_DEFAULT_PASS: "guest"
            RABBITMQ_DEFAULT_VHOST: "/"
        healthcheck:
            test: ["CMD", "curl", "-f", "http://localhost:5672"]
            test: ["CMD", "curl", "-f", "http://localhost:15672"]
            test: ["CMD", "curl", "-f", "http://rabbitmq1:5672"]
            interval: 30s
            timeout: 10s
            retries: 5
        security_opt:
            - label:disable
